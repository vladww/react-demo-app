{"version":3,"sources":["hoc/withAuthRedirect.jsx","components/Dialogs/Dialogs.module.css","components/Dialogs/DialogItem/DialogItem.module.css","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Message/Message.jsx","components/Dialogs/DialogsPage.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","DialogItem","path","userid","className","s","dialog","active","activeClassName","src","alt","name","Message","message","maxLength50","maxLengthCreator","AddMessageReduxForm","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","placeholder","validate","required","dialogs","useSelector","dialogsPage","messages","dispatch","useDispatch","dialogsElements","map","d","id","messagesElements","m","formData","sendMessage","newMessageBody"],"mappings":"sOAIIA,EAA6B,SAACC,GAChC,MAAO,CACLC,OAAQD,EAAME,KAAKD,SAIVE,EAAmB,SAACC,GAAe,IACxCC,EADuC,4JAE3C,WACE,OAAIC,KAAKC,MAAMN,OACR,cAACG,EAAD,eAAeE,KAAKC,QADG,cAAC,IAAD,CAAUC,GAAG,eAHF,GACbC,IAAML,WAStC,OAFqCM,YAAQX,EAARW,CAAoCL,K,oBCjB3EM,EAAOC,QAAU,CAAC,QAAU,yBAAyB,SAAW,0BAA0B,SAAW,4B,oBCArGD,EAAOC,QAAU,CAAC,OAAS,2BAA2B,OAAS,6B,qHCoBhDC,EAhBI,SAACN,GAClB,IAAIO,EAAI,mBAAeP,EAAMQ,QAE7B,OACE,qBAAKC,UAAWC,IAAEC,OAAS,IAAMD,IAAEE,OAAnC,SACE,eAAC,IAAD,CAASX,GAAIM,EAAMM,gBAAiBH,IAAEE,OAAtC,UACE,qBACEE,IAAI,+EACJC,IAAI,YAEN,4BAAIf,EAAMgB,aCPHC,G,OAJC,SAACjB,GACf,OAAO,8BAAMA,EAAMkB,Y,4DCMfC,EAAcC,YAAiB,IAkB/BC,EAAsBC,YAAU,CAACC,KAAM,wBAAjBD,EAhBL,SAACtB,GACtB,OACE,uBAAMwB,SAAUxB,EAAMyB,aAAtB,UACE,8BACE,cAACC,EAAA,EAAD,CACEC,UAAWC,IACXZ,KAAM,iBAENa,YAAa,oGACbC,SAAU,CAACC,IAAUZ,OAGzB,8BAAK,kDA0CIvB,uBAnCC,SAACI,GAEf,IAAMgC,EAAUC,aAAY,SAAAxC,GAAK,OAAIA,EAAMyC,YAAYF,WACjDG,EAAWF,aAAY,SAAAxC,GAAK,OAAIA,EAAMyC,YAAYC,YAClDC,EAAWC,cAEbC,EAAkBN,EAAQO,KAAK,SAAAC,GAAC,OAAI,cAAC,EAAD,CAAuBhC,OAAQgC,EAAEC,GAAIzB,KAAMwB,EAAExB,MAA5BwB,EAAEC,OACvDC,EAAmBP,EAASI,KAAK,SAAAI,GAAC,OAAI,cAAC,EAAD,CAAoBzB,QAASyB,EAAEzB,SAAjByB,EAAEF,OAe1D,OACE,sBAAKhC,UAAWC,IAAEsB,QAAlB,UACE,8BACIM,IAEJ,sBAAK7B,UAAWC,IAAEyB,SAAlB,UACE,8BAAOO,IACP,cAACrB,EAAD,CAAqBG,SAXL,SAACoB,GACrBR,EAASS,YAAYD,EAASE,oBAQ5B","file":"static/js/5.de72f79b.chunk.js","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nlet mapStateToPropsForRedirect = (state) => {\r\n  return {\r\n    isAuth: state.auth.isAuth\r\n  }\r\n}\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render() {\r\n      if(!this.props.isAuth) return <Redirect to='/login' />\r\n      return <Component {...this.props} />\r\n    }\r\n  }\r\n\r\n  let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n\r\n  return ConnectedAuthRedirectComponent\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__cE70M\",\"messages\":\"Dialogs_messages__3mEz8\",\"textarea\":\"Dialogs_textarea__1BY7B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"DialogItem_dialog__2UHgl\",\"active\":\"DialogItem_active___PCbT\"};","// import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport s from './DialogItem.module.css'\r\n\r\n\r\nconst DialogItem = (props) => {\r\n  let path = `/dialogs/${props.userid}`\r\n\r\n  return (\r\n    <div className={s.dialog + ' ' + s.active}>\r\n      <NavLink to={path} activeClassName={s.active}>\r\n        <img\r\n          src='https://wallbox.ru/resize/800x480/wallpapers/main/201313/be283e0c3b9a67b.jpg'\r\n          alt='wallbox'\r\n        />\r\n        <p>{props.name}</p>\r\n      </NavLink>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DialogItem\r\n\r\n// посмотреть, надо ли убрать первый класс у активного диалога?","// import React from 'react'\r\nimport styles from './Message.module.css'\r\n\r\n\r\nconst Message = (props) => {\r\n  return <div>{props.message}</div>\r\n}\r\n\r\nexport default Message\r\n\r\n// посмотреть, надо ли убрать первый класс у активного диалога?","// import React from 'react'\r\nimport s from './Dialogs.module.css'\r\nimport DialogItem from './DialogItem/DialogItem'\r\nimport Message from './Message/Message'\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport { required, maxLengthCreator } from '../../utils/validators/validators'\r\nimport { Textarea } from '../common/FormControls/FormControls'\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { sendMessage } from '../../redux/dialogs-reducer'\r\n\r\nconst maxLength50 = maxLengthCreator(50)\r\n\r\nconst AddMessageForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div>\r\n        <Field\r\n          component={Textarea}\r\n          name={'newMessageBody'}\r\n          // className={s.textarea} //потом узнать, куда его. Может и зедсь оставить можно\r\n          placeholder={'Введите сообщение'}\r\n          validate={[required, maxLength50]}\r\n        />\r\n      </div>\r\n      <div><button>Send</button></div>\r\n    </form>\r\n  )\r\n}\r\nconst AddMessageReduxForm = reduxForm({form: 'dialogAddMessageForm'})(AddMessageForm)\r\n\r\n\r\nconst Dialogs = (props) => {\r\n\r\n  const dialogs = useSelector(state => state.dialogsPage.dialogs)\r\n  const messages = useSelector(state => state.dialogsPage.messages)\r\n  const dispatch = useDispatch()\r\n\r\n  let dialogsElements = dialogs.map( d => <DialogItem key={d.id} userid={d.id} name={d.name} />)\r\n  let messagesElements = messages.map( m => <Message key={m.id} message={m.message} />)\r\n\r\n  // let sendMessage = () => {\r\n  //   props.sendMessage()\r\n  // }\r\n\r\n  // let onMessageChange = (e) => {\r\n  //   let body = e.target.value\r\n  //   props.updateNewMessageBody(body)\r\n  // }\r\n  \r\n  const addNewMessage = (formData) => {\r\n    dispatch(sendMessage(formData.newMessageBody))\r\n  }\r\n\r\n  return (\r\n    <div className={s.dialogs}>\r\n      <div>\r\n        { dialogsElements }\r\n      </div>\r\n      <div className={s.messages}>\r\n        <div>{ messagesElements }</div>\r\n        <AddMessageReduxForm onSubmit={addNewMessage} /> {/*  надо будет, наверное, убрать это из этого div */}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withAuthRedirect(Dialogs)\r\n\r\n// посмотреть, надо ли убрать первый класс у активного диалога?"],"sourceRoot":""}
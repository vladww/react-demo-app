{"version":3,"sources":["redux/dialogs-reducer.js","components/common/Preloader/Preloader.module.css","components/Navbar/Navbar.module.css","api/api.js","reportWebVitals.js","redux/auth-reducer.js","redux/app-reducer.js","redux/sidebar-reducer.js","redux/redux-store.js","hoc/withSuspense.jsx","components/Navbar/Navbar.jsx","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","components/Login/Login.jsx","components/News/News.jsx","components/Music/Music.jsx","components/Settings/Settings.jsx","App.js","index.js","components/common/FormControls/FormControls.module.css","assets/images/spinner200.svg","components/common/Preloader/Preloader.jsx","components/common/FormControls/FormControls.jsx","utils/validators/validators.js","components/Header/Header.module.css","redux/profile-reducer.js","utils/object-helpers.js","redux/users-reducer.js"],"names":["SEND_MESSAGE","initialState","dialogs","id","name","messages","message","sendMessage","newMessageBody","type","dialogsReducer","state","action","module","exports","instance","axios","baseURL","withCredentials","headers","authAPI","auth","get","login","email","password","rememberMe","captcha","post","logout","delete","usersAPI","getUsers","currentPage","pageSize","term","friend","response","data","followUser","userId","unfollowUser","profileAPI","getProfile","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","securityAPI","getCaptcha","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","SET_USER_DATA","SET_CAPTCHA_URL_SUCCESS","isAuth","captchaUrl","setAuthUserData","payLoad","getAuthUserData","dispatch","a","resultCode","getCaptchaUrl","url","authReducer","INITIALIZING_SUCCEEDED","initialized","appReducer","sidebarReducer","reducers","combineReducers","dialogsPage","profilePage","profileReducer","sidebar","usersPage","usersReducer","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","withSuspense","Component","props","fallback","Preloader","Navbar","className","s","nav","item","to","activeClassName","active","Header","header","src","alt","loginBlock","onClick","HeaderContainer","this","connect","LoginReduxForm","reduxForm","onSubmit","handleSubmit","Field","component","Input","validate","required","placeholder","error","formSummaryError","Login","useSelector","useDispatch","length","stopSubmit","_error","News","Music","Settings","DialogsPage","lazy","ProfilePage","UsersPage","withRouter","catchAllUnhandledErrors","promiseRejectionEvent","console","reason","alert","useEffect","promise","Promise","all","addEventListener","removeEventListener","exact","from","path","render","ReactDOM","document","getElementById","preloader","preloader_img","FormControl","hasError","touched","formControl","children","Textarea","input","restProps","meta","value","maxLengthCreator","maxLength","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_USER_STATUS","SAVE_PHOTO_SUCCESSS","posts","age","likesCount","profile","addPost","newPostBody","setUserStatus","getUserProfile","getUserStatus","updateUserStatus","log","file","photos","filter","p","postId","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_USERS_TOTAL_COUNT","SET_IS_FETCHING","SET_IN_FOLLOWING_PROGRESS","SET_FILTER","users","usersTotalCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","setIsFetching","setFollowingProgress","setFilter","payload","requestUsers","page","totalCount","follow","unfollow","followed"],"mappings":"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","file":"static/js/main.40018181.chunk.js","sourcesContent":["const SEND_MESSAGE = 'SEND_MESSAGE'\r\n\r\n\r\nlet initialState = {\r\n  dialogs: [\r\n    { id: '1', name: 'Vladimir' },\r\n    { id: '2', name: 'Petr' },\r\n    { id: '3', name: 'Ivan' },\r\n    { id: '4', name: 'Semyon' },\r\n    { id: '5', name: 'John' },\r\n    { id: '6', name: 'James' },\r\n  ],\r\n  messages: [\r\n    { id: '1', message: 'Hello friend!' },\r\n    { id: '2', message: 'How are you doing?' },\r\n    { id: '3', message: 'Everything is very good!' },\r\n    { id: '4', message: ':)' },\r\n    { id: '5', message: 'Hi, mate! How are you?' },\r\n    { id: '6', message: 'OMG!' },\r\n  ]\r\n}\r\n\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n  \r\n  switch(action.type) {\r\n\r\n    case SEND_MESSAGE:\r\n      return {\r\n        ...state,\r\n        messages:[...state.messages, {id: 7, message: action.newMessageBody}]\r\n      }\r\n      \r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\nexport const sendMessage = (newMessageBody) => ({type: SEND_MESSAGE, newMessageBody})\r\n\r\nexport default dialogsReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__PopGZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1Rscw\",\"item\":\"Navbar_item__t1Fkk\",\"active\":\"Navbar_active__SV3FD\"};","import * as axios from 'axios'\r\n\r\nconst instance = axios.create({\r\n  baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n  withCredentials: true,\r\n  headers: { 'API-KEY' : 'd31e62f0-73b3-47e7-92c3-7bb81d95d297' }\r\n})\r\n\r\n\r\nexport const authAPI = {\r\n  async auth() {\r\n    return await instance.get(`auth/me`)\r\n  },\r\n  async login(email, password, rememberMe = false, captcha = null) {\r\n    return await instance.post(`auth/login`, { email, password, rememberMe, captcha })\r\n  },\r\n  async logout() {\r\n    return await instance.delete(`auth/login`)\r\n  },\r\n}\r\n\r\n\r\nexport const usersAPI = {\r\n  async getUsers(currentPage = 1, pageSize = 5, term = '', friend = null) {\r\n    let response = await instance.get(`users?page=${currentPage}&count=${pageSize}&term=${term}` + (friend !== null ? `&friend=${friend}` : '') )\r\n    return response.data\r\n  },\r\n  async followUser(userId) {\r\n    let response = await instance.post(`follow/${userId}`)\r\n    return response.data\r\n  },\r\n  async unfollowUser(userId) {\r\n    let response = await instance.delete(`follow/${userId}`)\r\n    return response.data\r\n  }\r\n}\r\n\r\n\r\nexport const profileAPI = {\r\n  async getProfile(userId = 16174) {\r\n    return await instance.get(`profile/${userId}`)\r\n  },\r\n  async getStatus(userId = 16174) {\r\n    return await instance.get(`profile/status/${userId}`)\r\n  },\r\n  async updateStatus(status) {\r\n    return await instance.put(`profile/status`, { status })\r\n  },\r\n  async savePhoto(photoFile) {\r\n    const formData = new FormData()\r\n    formData.append('image', photoFile)\r\n    return await instance.put(`profile/photo`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n  },\r\n}\r\n\r\nexport const securityAPI = {\r\n  async getCaptcha() {\r\n    return await instance.get(`security/get-captcha-url`)\r\n  },\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { authAPI, securityAPI } from '../api/api'\r\nimport { stopSubmit } from 'redux-form'\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA'\r\nconst SET_CAPTCHA_URL_SUCCESS = 'SET_CAPTCHA_URL_SUCCESS'\r\n\r\nlet initialState = {\r\n  userId: null,\r\n  email: null,\r\n  login: null,\r\n  isAuth: false,\r\n  captchaUrl: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case SET_USER_DATA:\r\n    case SET_CAPTCHA_URL_SUCCESS:\r\n      return {\r\n        ...state,\r\n        ...action.payLoad\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const setAuthUserData = (userId, email, login, isAuth) =>\r\n  ({type: SET_USER_DATA, payLoad: {userId, email, login, isAuth}})\r\n\r\nexport const setCaptchaUrlSuccess = (captchaUrl) => ({type: SET_CAPTCHA_URL_SUCCESS, payLoad: {captchaUrl}})\r\n\r\n\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n  let response = await authAPI.auth()\r\n\r\n  if(response.data.resultCode === 0) {\r\n    let {id, login, email} = response.data.data\r\n    dispatch(setAuthUserData(id, email, login, true))\r\n  }\r\n}\r\n\r\nexport const login = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n  let response = await authAPI.login(email, password, rememberMe, captcha)\r\n\r\n  if(response.data.resultCode === 0) {\r\n    dispatch(getAuthUserData())\r\n  } else {\r\n    if(response.data.resultCode === 10) dispatch(getCaptchaUrl())\r\n    \r\n    let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error'\r\n    dispatch(stopSubmit('login', {_error: message}))\r\n  }\r\n}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  let response = await authAPI.logout()\r\n  \r\n  if(response.data.resultCode === 0) {\r\n    dispatch(setAuthUserData(null, null, null, false))\r\n  }\r\n}\r\n\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n  const response = await securityAPI.getCaptcha()\r\n  \r\n  dispatch(setCaptchaUrlSuccess(response.data.url))\r\n}\r\n\r\n\r\nexport default authReducer","import { getAuthUserData } from './auth-reducer'\r\n\r\nconst INITIALIZING_SUCCEEDED = 'INITIALIZING_SUCCEEDED'\r\n\r\nlet initialState = {\r\n  initialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case INITIALIZING_SUCCEEDED:\r\n      return {\r\n        ...state,\r\n        initialized: true\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const initializingSucceeded = () => ({type: INITIALIZING_SUCCEEDED})\r\n\r\nexport const initializeApp = () => async (dispatch) => {\r\n  let promise = dispatch(getAuthUserData())\r\n\r\n  // await dispatch(initializingSucceeded())\r\n\r\n  Promise.all([promise])   //так можно выполнять действия после выполнени всех промисов\r\n  await dispatch(initializingSucceeded())    //надо добавить другие промисы в массив с promise\r\n}\r\n\r\nexport default appReducer","let initialState = {}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n  \r\n  return state\r\n}\r\n\r\n\r\nexport default sidebarReducer","import { applyMiddleware, combineReducers, createStore, compose } from 'redux'\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\nimport appReducer from './app-reducer'\r\nimport authReducer from './auth-reducer'\r\nimport dialogsReducer from './dialogs-reducer'\r\nimport profileReducer from './profile-reducer'\r\nimport sidebarReducer from './sidebar-reducer'\r\nimport usersReducer from './users-reducer'\r\n\r\n\r\nlet reducers = combineReducers({\r\n  dialogsPage: dialogsReducer,\r\n  profilePage: profileReducer,\r\n  sidebar: sidebarReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer\r\n})\r\n\r\n//этот вариант стандартный, а ниже - подключается плагин redux tools для браузера\r\n// let store = createStore(reducers, applyMiddleware(thunkMiddleware))\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\n\r\n\r\nwindow.__store__ = store\r\n\r\nexport default store","import { Suspense } from 'react'\r\nimport Preloader from '../components/common/Preloader/Preloader'\r\n\r\n\r\nconst withSuspense = (Component) => {\r\n  return (props) => {\r\n    return <Suspense fallback={<Preloader />}>\r\n      <Component {...props} />\r\n    </Suspense>\r\n  }\r\n}\r\n\r\nexport default withSuspense","// import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport s from './Navbar.module.css'\r\n\r\n\r\nconst Navbar = () => {\r\n  // alert('nav')\r\n  return (\r\n    <nav className={s.nav}>\r\n      <div className={s.item}>\r\n        <NavLink to='/profile' activeClassName={s.active}>Profile</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to='/dialogs' activeClassName={s.active}>Messages</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to='/users' activeClassName={s.active}>Users</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to='/news' activeClassName={s.active}>News</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to='/music' activeClassName={s.active}>Music</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to='/settings' activeClassName={s.active}>Settings</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to='/asd' activeClassName={s.active}>404</NavLink>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Navbar","// import React from 'react'\r\nimport s from './Header.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\n\r\nconst Header = (props) => {\r\n  return (\r\n    <header className={s.header}>\r\n      <img\r\n        src='https://w7.pngwing.com/pngs/20/70/png-transparent-universal-declaration-of-human-rights-human-rights-logo-symbol-human-law-blue-hand-logo.png'\r\n        alt=\"my social_network\"\r\n      />\r\n      <div className={s.loginBlock}>\r\n        { props.isAuth ?\r\n          <div>\r\n            <div>{ props.login }</div>\r\n            <button onClick={ props.logout }>Logout</button>\r\n          </div>\r\n          :\r\n          <NavLink to={'/login'}>Login</NavLink>\r\n        }\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Header from './Header'\r\nimport { logout } from '../../redux/auth-reducer'\r\n\r\n\r\nclass HeaderContainer extends Component {\r\n\r\n  render() {\r\n    return <Header {...this.props} />\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuth: state.auth.isAuth,\r\n  login: state.auth.login,\r\n})\r\n\r\nexport default connect(mapStateToProps, { logout })(HeaderContainer)","// import React from 'react'\r\n// import s from './Login.module.css'\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport { Input } from '../common/FormControls/FormControls'\r\nimport { maxLengthCreator, required } from '../../utils/validators/validators'\r\nimport { login } from '../../redux/auth-reducer'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router'\r\nimport s from '../common/FormControls/FormControls.module.css'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\n// const FormControl = ({input, meta, child, ...props}) => {\r\n//   const hasError = meta.touched && meta.error\r\n\r\n//   return (\r\n//     <div className={s.formControl + ' ' + (hasError && s.error)}>\r\n//       <div>\r\n//         { props.child }\r\n//       </div>\r\n//       { hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   )\r\n// }\r\n\r\nconst LoginForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div>\r\n        <Field\r\n          name={'email'}\r\n          component={Input}\r\n          validate={[required]}\r\n          placeholder={'Email'}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Field\r\n          name={'password'}\r\n          component={Input}\r\n          validate={[required]}\r\n          placeholder={'Password'}\r\n          type={'password'}\r\n        />\r\n      </div>\r\n      <div>\r\n        <Field\r\n          name={'rememberMe'}\r\n          type={'checkbox'}\r\n          component={'input'}\r\n        /> Remember me\r\n      </div>\r\n      { props.error &&\r\n        <div className={s.formSummaryError}>\r\n          {props.error}\r\n        </div>\r\n      }\r\n\r\n      { props.captchaUrl && <img src={props.captchaUrl} alt=\"Captcha\"/> }\r\n      { props.captchaUrl && <div>\r\n          <Field\r\n            name={'captcha'}\r\n            component={Input}\r\n            validate={[required]}\r\n            placeholder={'Symbols from image'}\r\n          />\r\n        </div>\r\n      }\r\n\r\n      <div>\r\n        <button>Login</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\nconst LoginReduxForm = reduxForm({form: 'login'})(LoginForm)\r\n\r\n\r\nconst Login = (props) => {\r\n\r\n  const isAuth = useSelector(state => state.auth.isAuth)\r\n  const captchaUrl = useSelector(state => state.auth.captchaUrl)\r\n  const dispatch = useDispatch()\r\n\r\n  const onSubmit = (formData) => {\r\n    dispatch(login(formData.email, formData.password, formData.rememberMe, formData.captcha))\r\n  }\r\n\r\n  if(isAuth) {\r\n    return <Redirect to='/profile' />\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n\r\n// const Login = (props) => {\r\n//   const onSubmit = (formData) => {\r\n//     console.log('formData', formData)\r\n//     props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n//   }\r\n\r\n//   if(props.isAuth) {\r\n//     return <Redirect to='/profile' />\r\n//   }\r\n\r\n//   return (\r\n//     <div>\r\n//       <h1>Login</h1>\r\n//       <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\r\n//     </div>\r\n//   )\r\n// }\r\n\r\n// const mapStateToProps = (state) => ({\r\n//   isAuth: state.auth.isAuth,\r\n//   captchaUrl: state.auth.captchaUrl\r\n// })\r\n\r\n\r\n// export default connect(mapStateToProps, {login})(Login)","// import React from 'react'\r\nimport s from './News.module.css'\r\n\r\n\r\nconst News = (props) => {\r\n  return(\r\n    <div>News</div>\r\n  )\r\n}\r\n\r\nexport default News","// import React from 'react'\r\nimport s from './Music.module.css'\r\n\r\n\r\nconst Music = (props) => {\r\n  return(\r\n    <div>Music</div>\r\n  )\r\n}\r\n\r\nexport default Music","// import React from 'react'\r\nimport s from './Settings.module.css'\r\n\r\n\r\nconst Settings = (props) => {\r\n  return(\r\n    <div>Settings</div>\r\n  )\r\n}\r\n\r\nexport default Settings","import { useEffect, lazy } from 'react'\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { initializeApp } from './redux/app-reducer'\n\nimport './App.css'\nimport withSuspense from './hoc/withSuspense'\n\nimport Navbar from './components/Navbar/Navbar'\nimport HeaderContainer from './components/Header/HeaderContainer'\nimport Preloader from './components/common/Preloader/Preloader'\nimport Login from './components/Login/Login'\n\nimport News from './components/News/News'\nimport Music from './components/Music/Music'\nimport Settings from './components/Settings/Settings'\n// import DialogsContainer from './components/Dialogs/DialogsContainer'\n// import ProfileContainer from './components/Profile/ProfileContainer'\n// import UsersContainer from './components/Users/UsersContainer'\nconst DialogsPage = lazy(() => import('./components/Dialogs/DialogsPage'))\nconst ProfilePage = lazy(() => import('./components/Profile/ProfilePage'))\nconst UsersPage = lazy(() => import('./components/Users/UsersPage'))\n\n\nconst App = (props) => {\n  \n  const initialized = useSelector(state => state.app.initialized)\n  const dispatch = useDispatch()\n\n  const catchAllUnhandledErrors = (promiseRejectionEvent) => {\n    console.error('ERROR OCCURED!', promiseRejectionEvent)\n    console.error('ERROR MESSAGE:', promiseRejectionEvent.reason.message)\n    alert(promiseRejectionEvent.reason.message)\n  }\n  \n  useEffect(() => {\n    dispatch(initializeApp())\n    window.addEventListener('unhandledrejection', catchAllUnhandledErrors)\n\n    return () => {\n      window.removeEventListener('unhandledrejection', catchAllUnhandledErrors)\n    }\n  }, [])\n\n  if(!initialized) {\n    return <Preloader />\n  }\n\n  return (\n    <div className='app-wrapper'>\n      <HeaderContainer />\n      <Navbar />\n      <div className='app-wrapper-content'>\n        <Switch>\n          <Redirect exact from='/' to='/profile' />\n          <Route path='/profile/:userId?' render={withSuspense(ProfilePage)} />\n          <Route path='/dialogs' render={withSuspense(DialogsPage)} />\n          <Route path='/users' render={withSuspense(UsersPage)} />\n          <Route path='/news' render={() => <News />} />\n          <Route path='/music' render={() => <Music />} />\n          <Route path='/settings' render={() => <Settings />} />\n          <Route path='/login/facebook' render={() => <div><div>Facebook</div><Login /></div>} />\n          <Route path='/login' render={() => <Login />} />\n          <Route exact path='' render={() => <div>404 NOT FOUND</div>} />\n        </Switch>\n      </div>\n    </div>)\n}\n\nconst mapStateToprops = (state) => ({\n  initialized: state.app.initialized\n})\n\nexport default withRouter(App)\n\n\n\n\n\n// class App extends Component {\n//   catchAllUnhandledErrors = (promiseRejectionEvent) => {\n//     console.error('ERROR OCCURED!', promiseRejectionEvent)\n//     console.error('ERROR MESSAGE:', promiseRejectionEvent.reason.message)\n//     alert(promiseRejectionEvent.reason.message)\n//   }\n  \n//   componentDidMount() {\n//     this.props.initializeApp()\n//     window.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n//   }\n\n//   componentWillUnmount() {\n//     window.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n//   }\n\n//   render() {\n//     if(!this.props.initialized) {\n//       return <Preloader />\n//     }\n\n//     return (\n//       <div className='app-wrapper'>\n//         <HeaderContainer />\n//         <Navbar />\n//         <div className='app-wrapper-content'>\n//           <Switch>\n//             <Redirect exact from='/' to='/profile' />\n//             <Route path='/profile/:userId?' render={withSuspense(ProfilePage)} />\n//             <Route path='/dialogs' render={withSuspense(DialogsPage)} />\n//             <Route path='/users' render={withSuspense(UsersPage)} />\n//             <Route path='/news' render={() => <News />} />\n//             <Route path='/music' render={() => <Music />} />\n//             <Route path='/settings' render={() => <Settings />} />\n//             <Route path='/login/facebook' render={() => <div><div>Facebook</div><Login /></div>} />\n//             <Route path='/login' render={() => <Login />} />\n//             <Route exact path='' render={() => <div>404 NOT FOUND</div>} />\n//           </Switch>\n//         </div>\n//       </div>)\n//   }\n// }\n\n// const mapStateToprops = (state) => ({\n//   initialized: state.app.initialized\n// })\n\n// export default compose(\n//   withRouter,\n//   connect( mapStateToprops, { initializeApp } )\n// )(App)\n","// import React from 'react'\nimport ReactDOM from 'react-dom'\n// import { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { HashRouter } from 'react-router-dom'  //используй его вместо BrowserRouter для деплоя на gitgub pages. Запусти npm run deploy\nimport reportWebVitals from './reportWebVitals'\nimport store from './redux/redux-store'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <HashRouter>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </HashRouter>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControls_formControl__2lVog\",\"error\":\"FormControls_error__13Iaq\",\"formSummaryError\":\"FormControls_formSummaryError__H83dQ\"};","export default __webpack_public_path__ + \"static/media/spinner200.ced94e52.svg\";","// import React from 'react'\r\nimport s from './Preloader.module.css'\r\nimport preloader_img from '../../../assets/images/spinner200.svg'\r\n\r\nconst Preloader = (props) => {\r\n  return <div className={s.preloader}><img src={preloader_img} alt=\"preloader\"/></div>\r\n}\r\n\r\nexport default Preloader","// import React from 'react'\r\nimport s from './FormControls.module.css'\r\n\r\n//вообще, всё, что здесь происходит, я ещё не до конца понял\r\n//более понятный варинат того же - в конце файла закомментирован\r\n\r\nexport const FormControl = (props) => {\r\n  // console.log('props2: ', props)\r\n  // console.log('======================================')\r\n  const hasError = props.touched && props.error\r\n\r\n  return (\r\n    <div className={s.formControl + ' ' + (hasError && s.error)}>\r\n      <div>\r\n        { props.children }\r\n      </div>\r\n      { hasError && <span>{props.error}</span>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n  const {input, meta, ...restProps} = props\r\n  return <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const Input = (props) => {\r\n  // console.log('props', props)\r\n  const {input, meta, ...restProps} = props\r\n  return <FormControl {...meta}><input {...input} {...restProps} /></FormControl>\r\n}\r\n\r\n// export const Textarea = ({input, meta, ...props}) => {\r\n//   const hasError = meta.touched && meta.error\r\n\r\n//   return (\r\n//     <div className={s.formControl + ' ' + (hasError && s.error)}>\r\n//       <div>\r\n//         <textarea {...input} {...props} />  \r\n//       </div>\r\n//       { hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   )\r\n// }\r\n\r\n// export const Input = ({input, meta, ...props}) => {\r\n//   const hasError = meta.touched && meta.error\r\n\r\n//   return (\r\n//     <div className={s.formControl + ' ' + (hasError && s.error)}>\r\n//       <div>\r\n//         <input {...input} {...props} />  \r\n//       </div>\r\n//       { hasError && <span>{meta.error}</span>}\r\n//     </div>\r\n//   )\r\n// }","export const required = value => {\r\n  if(value) return undefined\r\n  \r\n  return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n  // if(value && value.lenght > 30) return 'Max length is 30 symbols' //а здесь ещё проверяет, что value вообще есть\r\n  if(value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n  return undefined\r\n}\r\n\r\n// export const maxLength30 = value => {\r\n//   // if(value && value.lenght > 30) return 'Max length is 30 symbols' //а здесь ещё проверяет, что value вообще есть\r\n//   if(value.length > 30) return 'Max length is 30 symbols'\r\n//   return undefined\r\n// }","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2-g9z\",\"loginBlock\":\"Header_loginBlock__28XJ8\"};","import { profileAPI } from '../api/api'\r\n\r\nconst ADD_POST = 'ADD_POST'\r\nconst DELETE_POST = 'DELETE_POST'\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE'\r\nconst SET_USER_STATUS = 'SET_USER_STATUS'\r\nconst SAVE_PHOTO_SUCCESSS = 'SAVE_PHOTO_SUCCESSS'\r\n\r\n\r\nlet initialState = {\r\n  posts: [\r\n    {id: 1, name:'Dima', age:'30', message:'Hi, how are you?', likesCount:'4'},\r\n    {id: 2, name:'Vova', age:'32', message:'It\\'s a nice thing!', likesCount:'15'},\r\n    {id: 3, name:'Alex V.', age:'18', message:'Hello friend!', likesCount:'1'},\r\n    {id: 4, name:'Nikolay S.', age:'21', message:'Wow, cool!', likesCount:'23'},\r\n    {id: 5, name:'Semyon Popov', age:'45', message:'Hi!', likesCount:'110'},\r\n  ],\r\n  profile: null,\r\n  status: ''\r\n}\r\n\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n\r\n    case ADD_POST:\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, {id: 6, name: 'Daniel', message: action.newPostBody, likesCount: 0}]\r\n      }\r\n\r\n    case DELETE_POST:\r\n      return {\r\n        ...state,\r\n        posts: state.posts.filter(p => p.id !== action.postId)\r\n        }\r\n\r\n    case SET_USER_PROFILE:\r\n      return {\r\n        ...state,\r\n        profile: action.profile\r\n      }\r\n\r\n    case SET_USER_STATUS:\r\n      return {\r\n        ...state,\r\n        status: action.status\r\n      }\r\n\r\n    case SAVE_PHOTO_SUCCESSS:\r\n      return {\r\n        ...state,\r\n        profile: {...state.profile, photos: action.photos}\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\n\r\nexport const addPost = (newPostBody) => ({type: ADD_POST, newPostBody})\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\r\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\r\nexport const setUserStatus = (status) => ({type: SET_USER_STATUS, status})\r\nexport const savePhotoSuccess = (photos) => ({type: SAVE_PHOTO_SUCCESSS, photos})\r\n\r\n\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n  profileAPI.getProfile(userId).then( response => dispatch(setUserProfile(response.data)) )\r\n}\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n  profileAPI.getStatus(userId).then( response => dispatch(setUserStatus(response.data)) )\r\n}\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n  try {\r\n    let response = await profileAPI.updateStatus(status)\r\n    response.data.resultCode === 0 && dispatch(setUserStatus(status))\r\n  } catch(e) {\r\n    console.log(e)\r\n    alert(e)\r\n    // alert(e.message)\r\n  }\r\n}\r\n\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n  let response = await profileAPI.savePhoto(file)\r\n\r\n  response.data.resultCode === 0 && dispatch(savePhotoSuccess(response.data.data.photos))\r\n}\r\n\r\n\r\n\r\nexport default profileReducer","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n  return items.map(u => {\r\n    if(u[objPropName] === itemId) {\r\n      return {...u, ...newObjProps}\r\n    }\r\n    return u\r\n  })\r\n}","import { usersAPI } from '../api/api'\r\nimport { updateObjectInArray } from '../utils/object-helpers'\r\n\r\nconst FOLLOW = 'FOLLOW'\r\nconst UNFOLLOW = 'UNFOLLOW'\r\nconst SET_USERS = 'SET_USERS'\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE'\r\nconst SET_USERS_TOTAL_COUNT = 'SET_USERS_TOTAL_COUNT'\r\nconst SET_IS_FETCHING = 'SET_IS_FETCHING'\r\nconst SET_IN_FOLLOWING_PROGRESS = 'SET_IN_FOLLOWING_PROGRESS'\r\nconst SET_FILTER = 'SET_FILTER'\r\n\r\n\r\nlet initialState = {\r\n  users: [],\r\n  pageSize: 10,\r\n  usersTotalCount: 0,\r\n  currentPage: 1,\r\n  isFetching: false,\r\n  followingInProgress: [],\r\n  filter: {\r\n    term: '',\r\n    friend: null\r\n  }\r\n}\r\n\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userId, 'id', {followed: true})\r\n\r\n        // users: state.users.map( u => (u.id === action.userId) ? {...u, followed: true} : u )\r\n        \r\n        // users: state.users.map(u => {\r\n        //   if (u.id === action.userId) {\r\n        //     return { ...u, followed: true }\r\n        //   }\r\n        //   return u\r\n        // })\r\n      }\r\n\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArray(state.users, action.userId, 'id', {followed: false})\r\n      }\r\n\r\n    case SET_USERS:\r\n      return {\r\n        ...state,\r\n        users: action.users\r\n        // users: [...state.users, ...action.users] //это чтобы подгружать юзеров в конец списка\r\n      }\r\n\r\n    case SET_CURRENT_PAGE:\r\n      return {\r\n        ...state,\r\n        currentPage: action.currentPage\r\n      }\r\n\r\n    case SET_USERS_TOTAL_COUNT:\r\n      return {\r\n        ...state,\r\n        usersTotalCount: action.usersTotalCount\r\n      }\r\n\r\n    case SET_IS_FETCHING:\r\n      return {\r\n        ...state,\r\n        isFetching: action.isFetching\r\n      }\r\n    case SET_IN_FOLLOWING_PROGRESS:\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFetching \r\n        ? [...state.followingInProgress, action.userId]\r\n        : state.followingInProgress.filter(id => id !== action.userId)\r\n      }\r\n    case SET_FILTER:\r\n      return {\r\n        ...state,\r\n        filter: action.payload\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport const followSuccess = (userId) => ({ type: FOLLOW, userId })\r\nexport const unfollowSuccess = (userId) => ({ type: UNFOLLOW, userId })\r\nexport const setUsers = (users) => ({ type: SET_USERS, users })\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, currentPage })\r\nexport const setUsersTotalCount = (usersTotalCount) => ({ type: SET_USERS_TOTAL_COUNT, usersTotalCount })\r\nexport const setIsFetching = (isFetching) => ({ type: SET_IS_FETCHING, isFetching })\r\nexport const setFollowingProgress = (isFetching, userId) => ({ type: SET_IN_FOLLOWING_PROGRESS, isFetching, userId })\r\nexport const setFilter = (filter) => ({ type: SET_FILTER, payload: filter })\r\n\r\n\r\nexport const requestUsers = (page, pageSize, filter) => async (dispatch) => {\r\n  dispatch(setIsFetching(true))\r\n  dispatch(setCurrentPage(page))\r\n  dispatch(setFilter(filter))\r\n\r\n  let data = await usersAPI.getUsers(page, pageSize, filter.term, filter.friend)\r\n\r\n  dispatch(setIsFetching(false))\r\n  dispatch(setUsers(data.items))\r\n  dispatch(setUsersTotalCount(data.totalCount))\r\n}\r\n\r\n\r\nexport const follow = (userId) => async (dispatch) => {\r\n  dispatch(setFollowingProgress(true, userId))\r\n  let data = await usersAPI.followUser(userId)\r\n\r\n  if(data.resultCode === 0) {\r\n    dispatch(followSuccess(userId))\r\n  }\r\n  dispatch(setFollowingProgress(false, userId))\r\n}\r\n\r\n\r\nexport const unfollow = (userId) => async (dispatch) => {\r\n  dispatch(setFollowingProgress(true, userId))\r\n  let data = await usersAPI.unfollowUser(userId)\r\n\r\n  if(data.resultCode === 0) {\r\n    dispatch(unfollowSuccess(userId))\r\n  }\r\n  dispatch(setFollowingProgress(false, userId))\r\n}\r\n\r\n\r\n\r\nexport default usersReducer"],"sourceRoot":""}